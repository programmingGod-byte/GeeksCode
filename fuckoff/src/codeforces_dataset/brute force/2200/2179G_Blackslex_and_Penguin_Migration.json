{
    "contestId": 2179,
    "index": "G",
    "title": "G. Blackslex and Penguin Migration",
    "statement": "IOI 2025 - Migrations\nThis is an interactive problem.\nThe species of penguins that Blackslex is researching lives on an island that is a grid with $$$n$$$ rows and $$$n$$$ columns. Exactly one penguin lives in each one cell of the grid.\nHe labelled each penguin as an integer from $$$1$$$ to $$$n^2$$$. After some time, some penguins migrated to another cell. After migration, every penguin will still be in some cell on the grid, and every cell contains exactly one penguin. He needs the current position of every penguin.\nTo do so, he can ask a penguin how far another penguin is from it.\nFormally, for a possible grid $$$x$$$ representing the position of all penguins, denote $$$\\operatorname{dist}(x, i, j)$$$ as the Manhattan distance of the penguin $$$i$$$ to the penguin $$$j$$$ in $$$x$$$$$$^{\\text{∗}}$$$.\nThere is a hidden grid $$$a$$$ with $$$n$$$ rows and $$$n$$$ columns. You need to find a grid $$$b$$$ that satisfies\n$$$b$$$ has $$$n$$$ rows and $$$n$$$ columns.\nEach cell of $$$b$$$ contains an integer from $$$1$$$ to $$$n^2$$$, which is a penguin's label. Each integer will be in a single cell.\nFor all $$$1 \\leq i, j \\leq n^2$$$, it holds that $$$\\operatorname{dist}(a, i, j) = \\operatorname{dist}(b, i, j)$$$.\nTo do so, you may make the following query no more than $$$3n^2 + 150$$$ times.\nGiven $$$i$$$, $$$j$$$ ($$$1 \\leq i, j \\leq n^2$$$), receive the value of $$$\\operatorname{dist}(a, i, j)$$$.\n$$$^{\\text{∗}}$$$Let $$$r_i$$$, $$$c_i$$$ denote the row and column that the penguin $$$i$$$ is in, and denote the same for $$$r_j$$$, $$$c_j$$$, then the Manhattan distance is $$$|r_i - r_j| + |c_i - c_j|$$$.",
    "inputSpecification": "Input\nEach test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\leq t \\leq 200$$$). The description of the test cases follows.\nThe first line of each test case contains a single integer $$$n$$$ ($$$2 \\leq n \\leq 100$$$) — the size of the island.\nIt is guaranteed that the total sum of all values of $$$n$$$ across all test cases does not exceed $$$500$$$.",
    "outputSpecification": "",
    "note": "Note\nNote that additional lines are for ease of reading. Your solution should not output these additional lines.\nIn the first test case, the grid $$$a$$$ is\n1\n4\n2\n3\nIn the second test case, the grid $$$a$$$ is\n9\n1\n3\n4\n2\n7\n8\n5\n6\nThe interaction is as follows.\nContestant\nJudge\nDescription\n2\nStart of the first test case. The island has size $$$n=2$$$.\n? 1 2\nThe contestant asks for the distance of penguin labelled $$$1$$$ and $$$2$$$.\n1\nThe distance of penguin labelled $$$1$$$ and $$$2$$$ is $$$1$$$.\n? 1 3\nThe contestant asks for the distance of penguin labelled $$$1$$$ and $$$3$$$.\n2\nThe distance of penguin labelled $$$1$$$ and $$$3$$$ is $$$2$$$.\n? 1 4\nThe contestant asks for the distance of penguin labelled $$$1$$$ and $$$4$$$.\n1\nThe distance of penguin labelled $$$1$$$ and $$$4$$$ is $$$1$$$.\n? 2 3\nThe contestant asks for the distance of penguin labelled $$$2$$$ and $$$3$$$.\n1\nThe distance of penguin labelled $$$2$$$ and $$$3$$$ is $$$1$$$.\n? 2 4\nThe contestant asks for the distance of penguin labelled $$$2$$$ and $$$4$$$.\n2\nThe distance of penguin labelled $$$2$$$ and $$$4$$$ is $$$2$$$.\n? 3 4\nThe contestant asks for the distance of penguin labelled $$$3$$$ and $$$4$$$.\n1\nThe distance of penguin labelled $$$3$$$ and $$$4$$$ is $$$1$$$.\n!\nThe contestant determined a possible grid $$$b$$$.\n3 4\nNote that the grid need not be exactly the same, but it must hold that $$$\\operatorname{dist}(a, i, j) = \\operatorname{dist}(b, i, j)$$$ for all $$$1 \\leq i, j \\leq n^2$$$.\n2 1\n3\nStart of the second test case. The island has size $$$n=3$$$.\n? 1 8\nThe contestant asks for the distance of penguin labelled $$$1$$$ and $$$8$$$.\n3\nThe distance of penguin labelled $$$1$$$ and $$$8$$$ is $$$3$$$.\n!\nThe contestant determined a possible grid $$$b$$$.\n9 1 3\n4 2 7\n8 5 6",
    "tags": [
        "brute force",
        "interactive",
        "math"
    ],
    "rating": 2200
}