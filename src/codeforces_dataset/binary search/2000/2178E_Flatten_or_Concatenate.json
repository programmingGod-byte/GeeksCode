{
    "contestId": 2178,
    "index": "E",
    "title": "E. Flatten or Concatenate",
    "statement": "This is an interactive problem.\nWhile procrastinating at work, Dilhan the elf stumbled upon two arrays $$$a$$$ and $$$b$$$. Initially, both of them consist of a single integer $$$2^k$$$ (i.e., $$$a=b=[2^k]$$$), where $$$k$$$ is a non-negative integer.\nDilhan then applied the following two types of operations an arbitrary number of times (possibly zero), in any order:\nFlatten — Choose either $$$a$$$ or $$$b$$$, and select\nany\nelement $$$x$$$ that is\nmaximal\nwithin that array ($$$x$$$ does\nnot\nneed to be maximal in the other array). Then, replace $$$x$$$ with two copies of $$$\\frac x2$$$ in the same position. This operation can only be applied if $$$x$$$ is even.\nConcatenate — Set\nboth\n$$$a$$$ and $$$b$$$ to be $$$a+b$$$, where $$$+$$$ denotes array concatenation.\nAfter performing these operations, Dilhan discards $$$b$$$, hides $$$a$$$ from you, and challenges you to a game.\nLet $$$n$$$ be the length of the hidden array $$$a$$$. You may make the following query:\nChoose an interval $$$[l, r]$$$ ($$$1\\le l\\le r\\le n$$$), and Dilhan will tell you the sum $$$a_l+a_{l+1}+\\cdots+a_r$$$.\nDetermine the value of the maximum element of $$$a$$$ by making at most $$$300$$$ queries.",
    "inputSpecification": "Input\nEach test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\le t \\le 100$$$). The description of the test cases follows.\nThe first line of each test case contains a single integer $$$n$$$ ($$$1 \\le n \\le 10^5$$$) — the length of $$$a$$$.\nIt is guaranteed that $$$1\\le a_i\\le 2^{30}$$$, and the array $$$a$$$ can be generated by the process described in the statements.\nIt is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$10^5$$$.",
    "outputSpecification": "",
    "note": "Note\nIn the first test case, Dilhan's hidden array $$$a$$$ is $$$[1, 1, 1, 1, 2, 2, 2, 1, 1, 2, 2]$$$. It can be generated by the following process:\n#\nType\n$$$a$$$ after operation\n$$$b$$$ after operation\n0\n$$$[4]$$$\n$$$[4]$$$\n1\nFlatten $$$a$$$\n$$$[\\underline 4] \\to {[2, 2]}$$$\n$$$[4]$$$\n2\nFlatten $$$b$$$\n$$$[2, 2]$$$\n$$$[\\underline 4] \\to {[2, 2]}$$$\n3\nFlatten $$$a$$$\n$$$[2, \\underline 2] \\to {[2, 1, 1]}$$$\n$$$[2, 2]$$$\n4\nConcatenate\n$$$[2, 1, 1, 2, 2]$$$\n$$$[2, 1, 1, 2, 2]$$$\n5\nFlatten $$$a$$$\n$$$[\\underline 2, 1, 1, 2, 2]\\to {[1, 1, 1, 1, 2, 2]}$$$\n$$$[2, 1, 1, 2, 2]$$$\n6\nConcatenate\n$$$[1, 1, 1, 1, 2, 2, 2, 1, 1, 2, 2]$$$\n$$$[1, 1, 1, 1, 2, 2, 2, 1, 1, 2, 2]$$$\nFor the query $$$\\mathtt{?\\;3\\;8}$$$, the jury responded with $$$1+1+2+2+2+1=9$$$;\nFor the query $$$\\mathtt{?\\;1\\;4}$$$, the jury responded with $$$1+1+1+1=4$$$;\nFor the query $$$\\mathtt{?\\;5\\;11}$$$, the jury responded with $$$2+2+2+1+1+2+2=12$$$.\nAnd the value of the maximum element of $$$a$$$ is $$$2$$$.\nIn the second test case, the array $$$a$$$ has only one element. By the query, the value of the only element is $$$1$$$, and it must also be the maximum value.\nIn the third test case, Dilhan's hidden array $$$a$$$ is $$$[4, 4, 4, 4, 4, 4, 4, 4]$$$. It can be generated by the following process:\n#\nType\n$$$a$$$ after operation\n$$$b$$$ after operation\n0\n$$$[4]$$$\n$$$[4]$$$\n1\nConcatenate\n$$$[4, 4]$$$\n$$$[4, 4]$$$\n2\nConcatenate\n$$$[4, 4, 4, 4]$$$\n$$$[4, 4, 4, 4]$$$\n3\nConcatenate\n$$$[4, 4, 4, 4, 4, 4, 4, 4]$$$\n$$$[4, 4, 4, 4, 4, 4, 4, 4]$$$\nAnd the value of the maximum element of $$$a$$$ is $$$4$$$.\nIn the fourth test case, Dilhan's hidden array $$$a$$$ is $$$[2^{29}, 2^{29}, 2^{30}, 2^{29}, 2^{28}, 2^{28}, 2^{29}, 2^{29}]$$$.",
    "tags": [
        "binary search",
        "divide and conquer",
        "interactive"
    ],
    "rating": 2000
}