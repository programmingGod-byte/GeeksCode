{
    "contestId": 2152,
    "index": "D",
    "title": "D. Division Versus Addition",
    "statement": "For an array $$$b=[b_1,b_2,\\ldots,b_m]$$$ of length $$$m$$$ ($$$b_i \\geq 2$$$), consider the following two-player game played by Poby and Rekkles.\nThe players take turns, with Poby moving first.\nOn Poby's turn, he must choose an element $$$x \\ge 2$$$ and replace it with $$$\\left\\lfloor \\frac{x}{2} \\right\\rfloor$$$. In other words, he picks $$$i$$$ ($$$1 \\leq i \\leq m$$$) such that $$$b_i \\ge 2$$$, then does $$$b_i := \\left\\lfloor \\frac{b_i}{2} \\right\\rfloor$$$.\nOn Rekkles' turn, he must choose an element $$$x \\ge 2$$$ from the array $$$b$$$ and replace it with $$$x+1$$$. In other words, he picks $$$i$$$ ($$$1 \\leq i \\leq m$$$) such that $$$b_i \\ge 2$$$, then does $$$b_i := b_i+1$$$.\nThe game ends once all elements in the array $$$b$$$ are equal to $$$1$$$.\nDefine the\nscore\nof the game as the number of moves that Poby makes. Poby's goal is to minimize the\nscore\n, while Rekkles's goal is to maximize the\nscore\n.\nThen, the\nvalue\nof the array $$$b$$$ is the score of the game when both players play optimally.\nYou are given an integer array $$$a$$$ of length $$$n$$$ ($$$a_i \\ge 2$$$).\nAnswer $$$q$$$ independent queries. In each query, you are given a range $$$1 \\leq l \\leq r \\leq n$$$ and must find the\nvalue\nof the array $$$[a_l, a_{l+1}, \\ldots, a_r]$$$.",
    "inputSpecification": "Input\nEach test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \\le t \\le 10^4$$$). The description of the test cases follows.\nThe first line of each test case contains two integers $$$n$$$ and $$$q$$$ ($$$1 \\le n, q \\le 250\\,000$$$) — the length of the array and the number of queries.\nThe next line contains $$$n$$$ integers $$$a_1, a_2, \\ldots, a_n$$$ ($$$2 \\le a_i \\le 10^9$$$) — the elements of the array $$$a$$$.\nThen $$$q$$$ lines follow. The $$$j$$$-th of them contains two integers $$$l_j$$$ and $$$r_j$$$ ($$$1 \\le l_j \\le r_j \\le n$$$) — the range of the subarray for the $$$i$$$-th query.\nIt is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$250\\,000$$$.\nIt is guaranteed that the sum of $$$q$$$ over all test cases does not exceed $$$250\\,000$$$.",
    "outputSpecification": "Output\nFor each test case, output $$$q$$$ lines. The $$$i$$$-th line should contain a single integer representing the answer to the $$$i$$$-th query.",
    "note": "Note\nExplanation of the first test case, first query (1 1):\nThe subarray is $$$[4]$$$.\nPoby: $$$4\\to \\left\\lfloor \\tfrac{4}{2}\\right\\rfloor=2$$$. The array is $$$[2]$$$.\nRekkles: $$$2\\to 3$$$. The array is $$$[3]$$$.\nPoby: $$$3\\to \\left\\lfloor \\tfrac{3}{2}\\right\\rfloor=1$$$. The array is $$$[1]$$$, so the game ends.\nIt can be shown that this strategy is optimal for both players. Therefore, the value of the array $$$[4]$$$ is $$$2$$$.\nExplanation of the first test case, second query (1 2):\nThe subarray is $$$[4,3]$$$.\nPoby: $$$3\\to \\left\\lfloor \\tfrac{3}{2}\\right\\rfloor=1$$$. The array is $$$[4,1]$$$.\nRekkles: $$$4\\to 5$$$. The array is $$$[5,1]$$$.\nPoby: $$$5\\to \\left\\lfloor \\tfrac{5}{2}\\right\\rfloor=2$$$. The array is $$$[2,1]$$$.\nRekkles: $$$2\\to 3$$$. The array is $$$[3,1]$$$.\nPoby: $$$3\\to \\left\\lfloor \\tfrac{3}{2}\\right\\rfloor=1$$$. The array is $$$[1,1]$$$, so the game ends.\nIt can be shown that this strategy is optimal for both players. Therefore, the value of the array $$$[4,3]$$$ is $$$3$$$.",
    "tags": [
        "games",
        "greedy",
        "math"
    ],
    "rating": 1700
}